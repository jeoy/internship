<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<!--
<h2></h2>
<p>
First Name: <span id="fname"></span><br /> 
Last Name: <span id="lname"></span><br /> 
</p> 
-->
<script type="text/javascript">

authenticationUrl="localhost/page/generateSessionJSONP.php";

//function:replaceNullOrUndifined
function replaceNullOrUndifined(data) {
	if (data == null || typeof data == 'undefined') 
		return "";
	return data;
}

//function:Trim
function Trim(str) {
	str=replaceNullOrUndifined(str);
	var iStart = 0;
	var iEnd = 0;
	var iLen = str.length;
	for(iStart = 0 ; iStart < iLen && str.charAt(iStart) == " "; iStart++);
	for(iEnd = iLen;  iEnd > 1 && str.charAt(iEnd -1 ) == "  ";  iEnd--);
	if(iStart > iEnd )  return  "";  
	return  str.substring(iStart,iEnd);
}

//function:TrimQuotationMarks
function TrimQuotationMarks(str) {
	str=replaceNullOrUndifined(str);
	var iStart = 0;
	var iEnd = str.length;
	if(str.charAt(iEnd -1)=='"') iEnd--;
	if(str.charAt(0)=='"') iStart++;
	if(iStart > iEnd )  return  "";  
	return  str.substring(iStart,iEnd);
}


function getCookie(objName) {
	var cookies = document.cookie.split(";");
	var iLen = cookies.length;
	if (iLen <= 0)
		return null;
	var keyName = Trim(objName);
	for ( var i = 0; i < iLen; i++) {
		if (typeof cookies[i] == 'undefined' || cookies[i] == "")
			continue;
		var keyValues = cookies[i].split("=");
		var key = Trim(keyValues[0]);
		if (key == keyName) {
			return decodeURIComponent(TrimQuotationMarks(Trim(keyValues[1]))).replace(/%20/g," ");
		}
	}
	return null;
}

var SessionObj = new Object();
SessionObj.Session_ID = getCookie("Session_ID");
SessionObj.Token_ID = getCookie("TOKEN_ID");
SessionObj.User_ID = getCookie("USER_ID");
/*
SessionObj.User_Name = getCookie("COOKIE_USER_NAME");
SessionObj.NickName = getCookie("COOKIE_NICKNAME");
SessionObj.User_Level_ID = getCookie("COOKIE_USER_LEVEL_ID");
SessionObj.Token_Date = getCookie("COOKIE_TOKEN_DATE");
SessionObj.User_IP = getCookie("COOKIE_USER_IP");
SessionObj.User_City = getCookie("COOKIE_USER_CITY");
SessionObj.linkData="";
*/


if (SessionObj.Session_ID == null || SessionObj.Session_ID == ""
		|| SessionObj.Token_ID  == null || SessionObj.Token_ID  == ""
		|| SessionObj.Token_Date == null || SessionObj.Token_Date == ""
/*		|| SessionObj.User_IP == null || SessionObj.User_IP == ""
		|| SessionObj.User_Level_ID == null || SessionObj.User_Level_ID == ""
		|| bNeedExtend*/
		) {
	SessionObj.IsLinkSuccess = false;
	//generateSessionJSONP(authenticationUrl+"/api/list/generateSession.jsonp?IS_PHONE=0&a="+ Math.random());
	generateSessionJSONP(authenticationUrl+"?checkCookie=Fail");
}


function generateSessionJSONP(url) {
	var JSONP=document.createElement("script");  
	JSONP.type="text/javascript";  
	JSONP.src=url+"&callback=WriteResult";
	document.getElementsByTagName("head")[0].appendChild(JSONP);
}

/*
var txt = '{"employees":[{"firstName":"Bill","lastName":"Gates" },{"firstName":"George","lastName":"Bush" },{"firstName":"Thomas","lastName":"Carter" }]}';
obj = JSON.parse(txt);

document.getElementById("fname").innerHTML=obj.employees[1].firstName 
document.getElementById("lname").innerHTML=obj.employees[1].lastName 
*/
</script>
</body>
</html>